# Hash
> 입력받은 데이터를 다른 형태의 데이터로 바꾸는 것

Hash는 해쉬 테이블, 암호화, 데이터 축약 등에 주로 사용된다.

### Hash Table
> 데이터를 Hash하여 테이블 내의 주소로 변환한 Table

Hash Table의 기본 개념은 아래와 같다.
  1. 데이터를 담을 테이블을 미리 크게 확보한다.
  2. 입력받은 데이터를 Hash하여 테이블 내의 주소를 계산한다.
  3. 계산된 주소에 입력받은 데이터를 담는다.

여기서, 주소 값을 얻는 연산은 상수 시간내에 가능하므로, 해쉬 테이블을 이용한 데이터 탐색의 속도도 상수 시간내에 가능하다.

단, Hash Table은 성능을 높이기 위해서는 많은 공간을 필요로 합니다.


### 해쉬 함수
> 입력값으로부터 해쉬값을 계산해내는 함수

##### 나눗셈법
> 가장 간단한 해쉬 함수

입력 값을 테이블의 크기로 나누고, 나머지를 테이블 주소로 사용하는 방법
+ 주소 = 입력 값 % 테이블의 크기

나눗셈 법을 이용하면 모든 수를 0 ~ (테이블 크기 - 1)의 범위 내로 표현이 가능합니다.
(여기서 테이블 크기는 주로 소수로 설정)

하지만, 나눗셈 법은 입력 값에 대해 동일한 해쉬 값이 나올 가능성이 큽니다. 여기서 다른 입력에 대해 동일한 해쉬 값이 나오는 것을 **충돌**이라고 합니다.

추가로 같은 해쉬 값이 아니다라도 일부 지역의 주소들을 집중적으로 반환하는 것을 **클러스터**라고 합니다.

##### 자릿수 접기
> 숫자의 각 자릿수를 더해 해쉬 값을 만드는 방식

종이를 접듯이 숫자를 접어 일정한 크기 이하의 수로 만드는 방식입니다.

이해를 위해 예를 하나 들어보겠습니다.
ex)
  n = 8127089 라는 수가 있습니다.
  이 수의 해쉬 값은 각자리의 수를 더하여 만들어 냅니다.
  hashvalue
  = 8 + 1 + 2 + 7 + 0 + 8 + 9
  = 35

자릿수 접기는 문자열을 키로 사용하는 해쉬 테이블에서 잘 어울린다.
(문자 -> ASCII 코드로 변환 후 자릿수 접기)


### 충돌
충돌을 해결하는 방법은 크게 두가지가 존재합니다.
  1. 해쉬 테이블 주소 바깥에 새로운 공간을 할당하여 해결 (Open Hashing)
  2. 주어진 해쉬 테이블 공간 내에서 해결 (Closed Hashing)

#### Open Hashing
##### Chaining
개방 해싱 기반의 충돌 해결 기법
같은 주소가 반환 되면 해당 주소에 링크드 리스트를 이용하여 문제를 해결
(해쉬 테이블에는 링크드 리스트에 대한 포인터를 관리)

체이닝 기반 해쉬 테이블에서 데이터 탐색 절차
  1. 찾고자 하는 값을 해싱하여 링크드 리스트 주소를 찾는다.
  2. 이 주소를 이용하여 링크드 리스트에 대한 포인터를 생성
  3. 링크드 리스트를 순회하며 목표 값이 저장되어 있는지 확인 (일치하면 반환)


체이닝은 링크드 리스트에서 원하는 데이터를 순차 탐색해야되는 단점이 존재
링크드 리스트 대신에 레드 블랙 트리나 이진 탐색트리를 사용하면 성능 향상 가능

##### 개방 주소법
충돌이 발생했을 때, 해쉬 함수를 통해 얻은 주소가 아니더라도 얼마든지 다른 주소를 사용하여 충돌을 해결할 수 있도록 허용하는 기법

선형 탐사
충돌이 발생하면 고정 폭만큼 이동하여 저장
클러스터 현상이 매우 잘 발생
=> 선형탐사 시간이 길어짐
=> 해쉬테이블 성능 저하


제곱 탐사
선형 탐사를 개선
이동폭이 제곱으로 늘어남
이방법도 2차 클러스터가 발생

이중 해싱
클러스터를 방지하기 위해 등장
2개의 해쉬함수로 하나는 주소값 계산 시에 하나는 충돌 발생 시에 이용


재해싱
선형,제곱 탐사, 이중 해싱을 이용해도 공간이 모두 찼을 때는 해결 방안이 없음 이를 위해 등장
해쉬 테이블의 크기를 늘리고, 늘어난 크기에 맞춰 모든 데이터를 재 해싱하는 기법
(통계적으로 70~80 사용률에서 해쉬 성능 저하 발생, 임계츠를 75%로 일반적으로 설정 후 재해싱)
